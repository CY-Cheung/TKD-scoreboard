# ğŸ“ é–‹ç™¼è¨˜éŒ„ï¼šè‡ªå‹•è£æ±ºèˆ‡ç‹€æ…‹å›æ»¾ç³»çµ±

**æ—¥æœŸï¼š** 2026-01-19
**ç›®æ¨™ï¼š** å¯¦ä½œåœ‹éš›è·†æ‹³é“è¦å‰‡ (WT) çš„è‡ªå‹•å‹è² åˆ¤å®šã€è¨ˆåˆ†ä¿®æ­£åŠæ¯”è³½æµæš¢åº¦å„ªåŒ–ã€‚

---

### âœ… 1. å·²å®Œæˆé–‹ç™¼ (Backend & Logic)

æˆ‘å€‘åœ¨ `src/Api.js` ä¸­é‡å¯«äº†æ ¸å¿ƒé‚è¼¯ï¼Œé”æˆä»¥ä¸‹åŠŸèƒ½ï¼š

1. **è¨ˆåˆ†æ•¸æ“šçµæ§‹æ“´å…… (5-Point Support)**
* **ä¿®æ­£å‰ï¼š** `pointsStat` åªæœ‰ 3 æ ¼ (1-3åˆ†)ï¼Œå°è‡´æ—‹è½‰è¸¢ (4/5åˆ†) è¢«å¿½ç•¥ã€‚
* **ä¿®æ­£å¾Œï¼š** `pointsStat` æ“´å……ç‚º **5 æ ¼** `[0,0,0,0,0]`ï¼Œä¸¦åŠ å…¥è‡ªå‹•é˜²å‘†åˆå§‹åŒ–ï¼Œç¢ºä¿èˆŠæ•¸æ“šä¸æœƒå ±éŒ¯ã€‚


2. **åŸå­åŒ–è£æ±ºäº¤æ˜“ (Atomic Transaction)**
* å°‡ã€ŒåŠ æ¸›åˆ†ã€ã€ã€Œè¨ˆç®—ç¸½åˆ†ã€ã€ã€Œè¦å‰‡æª¢æŸ¥ã€ã€ã€Œæ™‚é–“å‡çµã€å…¨éƒ¨å°è£åœ¨åŒä¸€å€‹ Database Transaction å…§ï¼Œç¢ºä¿æ•¸æ“šçµ•å°ä¸€è‡´ã€‚


3. **è‡ªå‹•åˆ¤å®šè¦å‰‡ (Auto-Referee)**
* **PTG (Point Gap):** åˆ†å·®  12 åˆ†ã€‚
* **PUN (Punishment):** å–®æ–¹ Gamjeom  5 å€‹ã€‚
* è§¸ç™¼æ™‚è‡ªå‹•è¨­å®š `isFinished = true` ä¸¦å¯«å…¥ `winReason`ã€‚


4. **æ™‚é–“å‡çµèˆ‡å›æ»¾ (Freeze & Resurrection)**
* **å‡çµï¼š** è§¸ç™¼ PTG/PUN çš„ç¬é–“ï¼Œç³»çµ±è¨ˆç®—ç¶“éæ™‚é–“ï¼Œæ›´æ–° DB çš„ `timer`ï¼Œç„¶å¾Œæ‰åœæ­¢ã€‚ç¢ºä¿é‡å•Ÿæ™‚æ™‚é–“æ˜¯æ­£ç¢ºçš„ã€‚
* **å¾©æ´»ï¼š** è‹¥è£åˆ¤ä¿®æ­£åˆ†æ•¸ï¼ˆä¾‹å¦‚æ‰£æ‰èª¤åˆ¤å¾—åˆ†ï¼‰ï¼Œå°è‡´åˆ†å·® ï¼Œç³»çµ±è‡ªå‹•è§£é™¤ `isFinished` é–å®šï¼Œæ¢å¾©æ¯”è³½ç‹€æ…‹ã€‚



---

### ğŸ“‹ 2. Screen.jsx é¡¯ç¤ºåŸç† (å³å°‡å¯¦ä½œ/å·²ç¢ºèªè¦ç¯„)

é€™æ˜¯å‰ç«¯é¡¯ç¤ºçš„æ ¸å¿ƒé‚è¼¯ï¼Œç¢ºä¿è£åˆ¤å’Œè§€çœ¾çœ‹åˆ°çš„è³‡è¨Šèˆ‡å¾Œå°ç‹€æ…‹ä¸€è‡´ã€‚

#### **A. é¡¯ç¤ºå„ªå…ˆç´š (Display Priority)**

`Screen.jsx` çš„è¨ˆæ™‚å™¨å€åŸŸä¸èƒ½åªé¡¯ç¤ºæ™‚é–“ï¼Œå¿…é ˆæ ¹æ“š `winReason` æ±ºå®šé¡¯ç¤ºå…§å®¹ã€‚å„ªå…ˆç´šç”±é«˜è‡³ä½å¦‚ä¸‹ï¼š

1. **ç‰¹æ®Šåˆ¤æ±º (Highest Priority)**
* æª¢æŸ¥ï¼š`winReason === 'PTG'` æˆ– `winReason === 'PUN'`
* è¡Œç‚ºï¼šç›´æ¥é¡¯ç¤ºå­—ä¸² **"PTG"** æˆ– **"PUN"**ã€‚
* æ¨£å¼ï¼šç¹¼æ‰¿åŸæœ‰çš„ CSS (é»‘åº•é»ƒå­—)ï¼Œä¸éœ€é¡å¤–è®Šè‰²ã€‚


2. **æ­£å¸¸å®Œè³½ (Medium Priority)**
* æª¢æŸ¥ï¼š`isFinished === true` ä¸” `winReason === null`
* è¡Œç‚ºï¼šé¡¯ç¤º **"0:00"**ã€‚


3. **æ¯”è³½é€²è¡Œ/æš«åœä¸­ (Lowest Priority)**
* æª¢æŸ¥ï¼šä¸Šè¿°çš†éã€‚
* è¡Œç‚ºï¼šé¡¯ç¤º **å€’æ•¸æ™‚é–“** (e.g., "1:30")ã€‚
* é‚è¼¯ï¼šä½¿ç”¨å‰ç«¯ `useEffect` è¨ˆç®—çš„ `displaySeconds`ã€‚



#### **B. ç¨‹å¼ç¢¼é‚è¼¯æ‘˜è¦**

é€™æ®µæ˜¯ `Screen.jsx` çš„é–‹ç™¼æº–å‰‡ï¼š

```javascript
const renderTimer = () => {
    const { winReason, isFinished } = matchData?.state || {};

    // 1. å„ªå…ˆé¡¯ç¤ºåˆ¤æ±ºçµæœ
    if (winReason === 'PTG') return "PTG";
    if (winReason === 'PUN') return "PUN";

    // 2. å…¶æ¬¡é¡¯ç¤ºæ™‚é–“åˆ°
    if (isFinished) return "0:00";

    // 3. æœ€å¾Œé¡¯ç¤ºæ­£å¸¸è¨ˆæ™‚
    return formatTime(displaySeconds);
};

```

---

### ğŸš€ 3. ä¸‹ä¸€æ­¥è¨ˆåŠƒ (Next Steps)

åŸºæ–¼ç›®å‰çš„åŸºç¤ï¼Œæ¥ä¸‹ä¾†çš„é–‹ç™¼é‡é»å»ºè­°å¦‚ä¸‹ï¼š

1. **å›åˆåˆ¶ç®¡ç† (Round Management):**
* ç›®å‰ç³»çµ±æ˜¯å–®å›åˆé‚è¼¯ã€‚
* éœ€è¦é–‹ç™¼ã€Œå›åˆçµæŸã€å¾Œçš„é‡ç½®é‚è¼¯ (ä¿ç•™å‹å ´æ•¸ `roundWins`ï¼Œé‡ç½®åˆ†æ•¸å’ŒçŠ¯è¦)ã€‚
* å¯¦ä½œã€Œä¸‰æˆ°å…©å‹ã€åˆ¤å®šã€‚


2. **é»ƒé‡‘åˆ† (Golden Point):**
* è‹¥å›åˆå¹³æ‰‹ï¼Œé€²å…¥é»ƒé‡‘åˆ†å›åˆçš„é‚è¼¯è™•ç†ã€‚


3. **å‹è€…å®£å‘Š (Winner Declaration):**
* ç•¶æ¯”è³½å®Œå…¨çµæŸæ™‚ï¼Œå½ˆå‡ºå‹è€…ç•«é¢ã€‚
